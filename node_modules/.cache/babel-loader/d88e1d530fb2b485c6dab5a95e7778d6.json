{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\n\nconst useBitly = () => {\n  _s();\n\n  const [input, setInput] = useState('');\n  const [shortUrl, setShortUrl] = useState('');\n  const [response, setResponse] = useState('');\n\n  const getUrl = longUrl => {\n    const requestOptions = {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${process.env.REACT_APP_API_TOKEN}`\n      },\n      body: JSON.stringify({\n        domain: \"bit.ly\",\n        long_url: longUrl\n      })\n    };\n\n    if (longUrl.length > 0) {\n      fetch('https://api-ssl.bitly.com/v4/shorten', requestOptions).then(response => response.json()).then(data => {\n        var _data$errors;\n\n        if ((data === null || data === void 0 ? void 0 : (_data$errors = data.errors) === null || _data$errors === void 0 ? void 0 : _data$errors.length) > 0 && data !== null && data !== void 0 && data.description) {\n          setResponse(data === null || data === void 0 ? void 0 : data.description);\n          setInput('');\n          console.log('response error description: ', data === null || data === void 0 ? void 0 : data.description);\n        } else {\n          setShortUrl(data === null || data === void 0 ? void 0 : data.link);\n          setInput('');\n          console.log('response data: ', data);\n        }\n      }).catch(error => console.log('ERROR fetching shorten url: ', error));\n    }\n  };\n\n  return {\n    getUrl,\n    shortUrl,\n    setShortUrl,\n    input,\n    setInput\n  };\n};\n\n_s(useBitly, \"t6fz6WRT9WyE1XWWjWCodOfiDOo=\");\n\nexport default useBitly;","map":{"version":3,"names":["useState","useBitly","input","setInput","shortUrl","setShortUrl","response","setResponse","getUrl","longUrl","requestOptions","method","mode","headers","process","env","REACT_APP_API_TOKEN","body","JSON","stringify","domain","long_url","length","fetch","then","json","data","errors","description","console","log","link","catch","error"],"sources":["/Users/hharris/src/projects/url-shortener/src/hooks/useBitly.js"],"sourcesContent":["import { useState } from 'react';\n\nconst useBitly = () => {\n    const [input, setInput] = useState('');\n    const [shortUrl, setShortUrl] = useState('')\n    const [response, setResponse] = useState('')\n\n    const getUrl = (longUrl) => {\n        const requestOptions = {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${process.env.REACT_APP_API_TOKEN}`\n            },\n            body: JSON.stringify({\n                domain: \"bit.ly\",\n                long_url: longUrl\n            })\n        };\n\n        if (longUrl.length > 0) {\n            fetch('https://api-ssl.bitly.com/v4/shorten', requestOptions)\n                .then(response => response.json())\n                .then(data => {\n                    if (data?.errors?.length > 0 && data?.description) {\n                        setResponse(data?.description)\n                        setInput('')\n                        console.log('response error description: ', data?.description)\n                    } else {\n                        setShortUrl(data?.link);\n                        setInput('')\n                        console.log('response data: ', data)\n                    }\n                })\n                .catch(error => console.log('ERROR fetching shorten url: ', error));\n        }\n        \n    }        \n\n    return { getUrl, shortUrl, setShortUrl, input, setInput };\n}\n\nexport default useBitly;\n"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;EAAA;;EACnB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBH,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACI,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BP,QAAQ,CAAC,EAAD,CAAxC;;EAEA,MAAMQ,MAAM,GAAIC,OAAD,IAAa;IACxB,MAAMC,cAAc,GAAG;MACnBC,MAAM,EAAE,MADW;MAEnBC,IAAI,EAAE,MAFa;MAGnBC,OAAO,EAAE;QACL,gBAAgB,kBADX;QAEL,iBAAkB,UAASC,OAAO,CAACC,GAAR,CAAYC,mBAAoB;MAFtD,CAHU;MAOnBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QACjBC,MAAM,EAAE,QADS;QAEjBC,QAAQ,EAAEZ;MAFO,CAAf;IAPa,CAAvB;;IAaA,IAAIA,OAAO,CAACa,MAAR,GAAiB,CAArB,EAAwB;MACpBC,KAAK,CAAC,sCAAD,EAAyCb,cAAzC,CAAL,CACKc,IADL,CACUlB,QAAQ,IAAIA,QAAQ,CAACmB,IAAT,EADtB,EAEKD,IAFL,CAEUE,IAAI,IAAI;QAAA;;QACV,IAAI,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,4BAAAA,IAAI,CAAEC,MAAN,8DAAcL,MAAd,IAAuB,CAAvB,IAA4BI,IAA5B,aAA4BA,IAA5B,eAA4BA,IAAI,CAAEE,WAAtC,EAAmD;UAC/CrB,WAAW,CAACmB,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEE,WAAP,CAAX;UACAzB,QAAQ,CAAC,EAAD,CAAR;UACA0B,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CJ,IAA5C,aAA4CA,IAA5C,uBAA4CA,IAAI,CAAEE,WAAlD;QACH,CAJD,MAIO;UACHvB,WAAW,CAACqB,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEK,IAAP,CAAX;UACA5B,QAAQ,CAAC,EAAD,CAAR;UACA0B,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BJ,IAA/B;QACH;MACJ,CAZL,EAaKM,KAbL,CAaWC,KAAK,IAAIJ,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CG,KAA5C,CAbpB;IAcH;EAEJ,CA/BD;;EAiCA,OAAO;IAAEzB,MAAF;IAAUJ,QAAV;IAAoBC,WAApB;IAAiCH,KAAjC;IAAwCC;EAAxC,CAAP;AACH,CAvCD;;GAAMF,Q;;AAyCN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}