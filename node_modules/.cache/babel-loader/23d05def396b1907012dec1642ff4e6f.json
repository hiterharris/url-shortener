{"ast":null,"code":"import _slicedToArray from\"/Users/henryharrisiv/Desktop/Projects/url-shortener/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';var useBitly=function useBitly(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),animation=_useState4[0],setAnimation=_useState4[1];var _useState5=useState({success:false,text:''}),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];var getUrl=function getUrl(longUrl){var requestOptions={method:'POST',mode:'cors',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(process.env.REACT_APP_API_TOKEN)},body:JSON.stringify({domain:\"bit.ly\",long_url:longUrl})};if(longUrl.length>0){fetch('https://api-ssl.bitly.com/v4/shorten',requestOptions).then(function(response){return response.json();}).then(function(data){data!==null&&data!==void 0&&data.errors?setResponse({success:false,text:data===null||data===void 0?void 0:data.description}):setResponse({success:true,text:data===null||data===void 0?void 0:data.link});}).catch(function(error){return console.log('ERROR fetching shorten url: ',error);});}setInput('');setAnimation(false);};var handleCopy=function handleCopy(){navigator.clipboard.writeText(response===null||response===void 0?void 0:response.text);setAnimation(true);setTimeout(function(){setAnimation(false);},5000);};return{getUrl:getUrl,response:response,input:input,setInput:setInput,handleCopy:handleCopy,animation:animation,setAnimation:setAnimation};};export default useBitly;","map":{"version":3,"names":["useState","useBitly","input","setInput","animation","setAnimation","success","text","response","setResponse","getUrl","longUrl","requestOptions","method","mode","headers","process","env","REACT_APP_API_TOKEN","body","JSON","stringify","domain","long_url","length","fetch","then","json","data","errors","description","link","catch","error","console","log","handleCopy","navigator","clipboard","writeText","setTimeout"],"sources":["/Users/henryharrisiv/Desktop/Projects/url-shortener/src/hooks/useBitly.js"],"sourcesContent":["import { useState } from 'react';\n\nconst useBitly = () => {\n    const [input, setInput] = useState('');\n    const [animation, setAnimation] = useState();\n    const [response, setResponse] = useState({ success: false, text: '' });\n\n    const getUrl = (longUrl) => {\n        const requestOptions = {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${process.env.REACT_APP_API_TOKEN}`\n            },\n            body: JSON.stringify({ domain: \"bit.ly\", long_url: longUrl })\n        };\n\n        if (longUrl.length > 0) {\n            fetch('https://api-ssl.bitly.com/v4/shorten', requestOptions)\n                .then(response => response.json())\n                .then(data => {\n                    data?.errors\n                    ? setResponse({ success: false, text: data?.description })\n                    : setResponse({ success: true, text: data?.link });\n                })\n                .catch(error => console.log('ERROR fetching shorten url: ', error));\n        }\n        setInput('');\n        setAnimation(false);\n    };\n\n    const handleCopy = () => {\n        navigator.clipboard.writeText(response?.text);\n        setAnimation(true);\n        setTimeout(() => {\n            setAnimation(false)\n        }, 5000);\n    };\n\n    return { getUrl, response, input, setInput, handleCopy, animation, setAnimation };\n}\n\nexport default useBitly;\n"],"mappings":"yIAAA,OAASA,QAAT,KAAyB,OAAzB,CAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACnB,cAA0BD,QAAQ,CAAC,EAAD,CAAlC,wCAAOE,KAAP,eAAcC,QAAd,eACA,eAAkCH,QAAQ,EAA1C,yCAAOI,SAAP,eAAkBC,YAAlB,eACA,eAAgCL,QAAQ,CAAC,CAAEM,OAAO,CAAE,KAAX,CAAkBC,IAAI,CAAE,EAAxB,CAAD,CAAxC,yCAAOC,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,CAACC,OAAD,CAAa,CACxB,GAAMC,eAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,IAAI,CAAE,MAFa,CAGnBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BC,OAAO,CAACC,GAAR,CAAYC,mBAAvC,CAFK,CAHU,CAOnBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEC,MAAM,CAAE,QAAV,CAAoBC,QAAQ,CAAEZ,OAA9B,CAAf,CAPa,CAAvB,CAUA,GAAIA,OAAO,CAACa,MAAR,CAAiB,CAArB,CAAwB,CACpBC,KAAK,CAAC,sCAAD,CAAyCb,cAAzC,CAAL,CACKc,IADL,CACU,SAAAlB,QAAQ,QAAIA,SAAQ,CAACmB,IAAT,EAAJ,EADlB,EAEKD,IAFL,CAEU,SAAAE,IAAI,CAAI,CACVA,IAAI,OAAJ,EAAAA,IAAI,SAAJ,EAAAA,IAAI,CAAEC,MAAN,CACEpB,WAAW,CAAC,CAAEH,OAAO,CAAE,KAAX,CAAkBC,IAAI,CAAEqB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEE,WAA9B,CAAD,CADb,CAEErB,WAAW,CAAC,CAAEH,OAAO,CAAE,IAAX,CAAiBC,IAAI,CAAEqB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEG,IAA7B,CAAD,CAFb,CAGH,CANL,EAOKC,KAPL,CAOW,SAAAC,KAAK,QAAIC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,KAA5C,CAAJ,EAPhB,EAQH,CACD9B,QAAQ,CAAC,EAAD,CAAR,CACAE,YAAY,CAAC,KAAD,CAAZ,CACH,CAvBD,CAyBA,GAAM+B,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrBC,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8B/B,QAA9B,SAA8BA,QAA9B,iBAA8BA,QAAQ,CAAED,IAAxC,EACAF,YAAY,CAAC,IAAD,CAAZ,CACAmC,UAAU,CAAC,UAAM,CACbnC,YAAY,CAAC,KAAD,CAAZ,CACH,CAFS,CAEP,IAFO,CAAV,CAGH,CAND,CAQA,MAAO,CAAEK,MAAM,CAANA,MAAF,CAAUF,QAAQ,CAARA,QAAV,CAAoBN,KAAK,CAALA,KAApB,CAA2BC,QAAQ,CAARA,QAA3B,CAAqCiC,UAAU,CAAVA,UAArC,CAAiDhC,SAAS,CAATA,SAAjD,CAA4DC,YAAY,CAAZA,YAA5D,CAAP,CACH,CAvCD,CAyCA,cAAeJ,SAAf"},"metadata":{},"sourceType":"module"}