{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\n\nconst useBitly = () => {\n  _s();\n\n  const [input, setInput] = useState('');\n  const [animation, setAnimation] = useState();\n  const [response, setResponse] = useState({\n    success: false,\n    text: ''\n  });\n\n  const getUrl = longUrl => {\n    const requestOptions = {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${process.env.REACT_APP_API_TOKEN}`\n      },\n      body: JSON.stringify({\n        domain: \"bit.ly\",\n        long_url: longUrl\n      })\n    };\n\n    if (longUrl.length > 0) {\n      fetch('https://api-ssl.bitly.com/v4/shorten', requestOptions).then(response => response.json()).then(data => {\n        data !== null && data !== void 0 && data.errors ? setResponse({\n          success: false,\n          text: data === null || data === void 0 ? void 0 : data.description\n        }) : setResponse({\n          success: true,\n          text: data === null || data === void 0 ? void 0 : data.link\n        });\n      }).catch(error => console.log('ERROR fetching shorten url: ', error));\n    }\n\n    setInput('');\n    setAnimation(false);\n  };\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(response === null || response === void 0 ? void 0 : response.text);\n    setAnimation(true);\n    setTimeout(() => {\n      setAnimation(false);\n    }, 5000);\n  };\n\n  return {\n    getUrl,\n    response,\n    input,\n    setInput,\n    handleCopy,\n    animation,\n    setAnimation\n  };\n};\n\n_s(useBitly, \"mDU1QwZTN5+t6nrd8g2zuekgMpM=\");\n\nexport default useBitly;","map":{"version":3,"names":["useState","useBitly","input","setInput","animation","setAnimation","response","setResponse","success","text","getUrl","longUrl","requestOptions","method","mode","headers","process","env","REACT_APP_API_TOKEN","body","JSON","stringify","domain","long_url","length","fetch","then","json","data","errors","description","link","catch","error","console","log","handleCopy","navigator","clipboard","writeText","setTimeout"],"sources":["/Users/hharris/src/projects/url-shortener/src/hooks/useBitly.js"],"sourcesContent":["import { useState } from 'react';\n\nconst useBitly = () => {\n    const [input, setInput] = useState('');\n  const [animation, setAnimation] = useState();\n    const [response, setResponse] = useState({\n        success: false,\n        text: ''\n    })\n\n    const getUrl = (longUrl) => {\n        const requestOptions = {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${process.env.REACT_APP_API_TOKEN}`\n            },\n            body: JSON.stringify({ domain: \"bit.ly\", long_url: longUrl })\n        };\n\n        if (longUrl.length > 0) {\n            fetch('https://api-ssl.bitly.com/v4/shorten', requestOptions)\n                .then(response => response.json())\n                .then(data => {\n                    data?.errors\n                    ? setResponse({ success: false, text: data?.description })\n                    : setResponse({ success: true, text: data?.link });\n                })\n                .catch(error => console.log('ERROR fetching shorten url: ', error));\n        }\n        setInput('');\n        setAnimation(false);\n    };\n\n    const handleCopy = () => {\n        navigator.clipboard.writeText(response?.text);\n        setAnimation(true);\n        setTimeout(() => {\n            setAnimation(false)\n        }, 5000);\n    };\n\n    return { getUrl, response, input, setInput, handleCopy, animation, setAnimation };\n}\n\nexport default useBitly;\n"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;EAAA;;EACnB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBH,QAAQ,CAAC,EAAD,CAAlC;EACF,MAAM,CAACI,SAAD,EAAYC,YAAZ,IAA4BL,QAAQ,EAA1C;EACE,MAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BP,QAAQ,CAAC;IACrCQ,OAAO,EAAE,KAD4B;IAErCC,IAAI,EAAE;EAF+B,CAAD,CAAxC;;EAKA,MAAMC,MAAM,GAAIC,OAAD,IAAa;IACxB,MAAMC,cAAc,GAAG;MACnBC,MAAM,EAAE,MADW;MAEnBC,IAAI,EAAE,MAFa;MAGnBC,OAAO,EAAE;QACL,gBAAgB,kBADX;QAEL,iBAAkB,UAASC,OAAO,CAACC,GAAR,CAAYC,mBAAoB;MAFtD,CAHU;MAOnBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAEC,MAAM,EAAE,QAAV;QAAoBC,QAAQ,EAAEZ;MAA9B,CAAf;IAPa,CAAvB;;IAUA,IAAIA,OAAO,CAACa,MAAR,GAAiB,CAArB,EAAwB;MACpBC,KAAK,CAAC,sCAAD,EAAyCb,cAAzC,CAAL,CACKc,IADL,CACUpB,QAAQ,IAAIA,QAAQ,CAACqB,IAAT,EADtB,EAEKD,IAFL,CAEUE,IAAI,IAAI;QACVA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,IAAAA,IAAI,CAAEC,MAAN,GACEtB,WAAW,CAAC;UAAEC,OAAO,EAAE,KAAX;UAAkBC,IAAI,EAAEmB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEE;QAA9B,CAAD,CADb,GAEEvB,WAAW,CAAC;UAAEC,OAAO,EAAE,IAAX;UAAiBC,IAAI,EAAEmB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEG;QAA7B,CAAD,CAFb;MAGH,CANL,EAOKC,KAPL,CAOWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CF,KAA5C,CAPpB;IAQH;;IACD9B,QAAQ,CAAC,EAAD,CAAR;IACAE,YAAY,CAAC,KAAD,CAAZ;EACH,CAvBD;;EAyBA,MAAM+B,UAAU,GAAG,MAAM;IACrBC,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BjC,QAA9B,aAA8BA,QAA9B,uBAA8BA,QAAQ,CAAEG,IAAxC;IACAJ,YAAY,CAAC,IAAD,CAAZ;IACAmC,UAAU,CAAC,MAAM;MACbnC,YAAY,CAAC,KAAD,CAAZ;IACH,CAFS,EAEP,IAFO,CAAV;EAGH,CAND;;EAQA,OAAO;IAAEK,MAAF;IAAUJ,QAAV;IAAoBJ,KAApB;IAA2BC,QAA3B;IAAqCiC,UAArC;IAAiDhC,SAAjD;IAA4DC;EAA5D,CAAP;AACH,CA1CD;;GAAMJ,Q;;AA4CN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}